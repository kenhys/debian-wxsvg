Description: Fix build failure with libav 10
Author: Anton Khirnov <anton@khirnov.net>
Bug-Debian: https://bugs.debian.org/739454
Reviewed-by: Alessio Treglia <alessio@debian.org>
Last-Update: 2014-04-15
---
 src/mediadec_ffmpeg.cpp |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

--- wxsvg.orig/src/mediadec_ffmpeg.cpp
+++ wxsvg/src/mediadec_ffmpeg.cpp
@@ -116,11 +116,11 @@ float wxFfmpegMediaDecoder::GetFps() {
 	float result = -1;
 	for (unsigned int i = 0; i < m_formatCtx->nb_streams; i++) {
 		AVStream* st = m_formatCtx->streams[i];
-		if (st->codec->codec_type == AVMEDIA_TYPE_VIDEO && st->r_frame_rate.num && st->r_frame_rate.den) {
-			if (st->r_frame_rate.num > st->r_frame_rate.den)
-				result = ((float) st->r_frame_rate.num) / st->r_frame_rate.den;
+		if (st->codec->codec_type == AVMEDIA_TYPE_VIDEO && st->avg_frame_rate.num && st->avg_frame_rate.den) {
+			if (st->avg_frame_rate.num > st->avg_frame_rate.den)
+				result = ((float) st->avg_frame_rate.num) / st->avg_frame_rate.den;
 			else
-				result = ((float) st->r_frame_rate.den) / st->r_frame_rate.num;
+				result = ((float) st->avg_frame_rate.den) / st->avg_frame_rate.num;
 			break;
 		}
 	}
